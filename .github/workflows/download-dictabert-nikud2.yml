name: Download DictaBERT Nikud Model

on:
  workflow_dispatch:

jobs:
  download-nikud:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Setup Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install transformers huggingface_hub
    
    - name: Download DictaBERT-nikud
      run: |
        python - << 'EOF'
        from huggingface_hub import snapshot_download
        
        print("Downloading dictabert-nikud...")
        
        snapshot_download(
            repo_id="dicta-il/dictabert-nikud",
            local_dir="./dictabert-nikud",
            local_dir_use_symlinks=False
        )
        
        print("Download complete!")
        EOF
    
    - name: Package model
      run: |
        tar -czf dictabert-nikud.tar.gz dictabert-nikud/
        ls -lh dictabert-nikud.tar.gz
    
    - name: Upload artifact
      uses: actions/upload-artifact@v4
      with:
        name: dictabert-nikud-model
        path: dictabert-nikud.tar.gz
        retention-days: 7
